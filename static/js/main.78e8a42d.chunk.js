(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],{14:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(6),c=a.n(l),s=(a(14),Object(r.createContext)());var o=function(){var e=Object(r.useContext)(s),t=e.isLoading,a=e.filters,l=e.filterByNumericValue,c=e.filmData,o=e.charData,i=l.filter((function(e){return e.name.toLowerCase().includes(a.filterByName.name.toLowerCase())}));return t?"loading...":n.a.createElement("table",{className:"table table-responsive table-sm align-middle table-hover text-center"},n.a.createElement("thead",{className:"border-0"},n.a.createElement("tr",{className:"align-middle"},n.a.createElement("th",null,"Name"),n.a.createElement("th",null,"Rotation Period"),n.a.createElement("th",null,"Orbital Period"),n.a.createElement("th",null,"Diameter"),n.a.createElement("th",null,"Climate"),n.a.createElement("th",null,"Gravity"),n.a.createElement("th",null,"Terrain"),n.a.createElement("th",null,"Surface Water"),n.a.createElement("th",null,"Population"),n.a.createElement("th",null,"Films"),n.a.createElement("th",null,"Residents"))),n.a.createElement("tbody",null,i.map((function(e,t){return n.a.createElement("tr",{key:t,className:"border-bottom border-secondary"},n.a.createElement("td",{"data-testid":"planet-name",className:"fw-bold"},e.name),n.a.createElement("td",null,e.rotation_period),n.a.createElement("td",null,e.orbital_period),n.a.createElement("td",null,e.diameter),n.a.createElement("td",null,e.climate),n.a.createElement("td",null,e.gravity),n.a.createElement("td",null,e.terrain),n.a.createElement("td",null,e.surface_water),n.a.createElement("td",null,e.population),n.a.createElement("td",null,e.films.map((function(e){return" - ".concat(c[e[e.length-2]-1].title)}))),n.a.createElement("td",null,e.residents.map((function(e){return" - ".concat(o[e.replace("https://swapi-trybe.herokuapp.com/api/people/","").replace("/","")-1].name)}))))}))))},i=a(3);var m=function(){var e=Object(r.useContext)(s),t=e.planetData,a=e.filters,l=e.setFilters,c=e.setFilterByNumericValue,o=a.filterByNumericValues.map((function(e){return e.column})),m=["population","orbital_period","diameter","rotation_period","surface_water"].filter((function(e){return!o.includes(e)})),u=t;return a.filterByNumericValues.length>0&&a.filterByNumericValues.map((function(e){return"bigger than"===e.comparison&&(u=u.filter((function(t){return parseInt(t[e.column],10)>parseInt(e.value,10)}))),"less than"===e.comparison&&(u=u.filter((function(t){return parseInt(t[e.column],10)<parseInt(e.value,10)}))),"equal to"===e.comparison&&(u=u.filter((function(t){return parseInt(t[e.column],10)===parseInt(e.value,10)}))),u})),Object(r.useEffect)((function(){c(u)}),[a.filterByNumericValues]),n.a.createElement("header",{className:"filters container-fluid py-3 d-flex justify-content-center"},n.a.createElement("form",null,n.a.createElement("span",{className:"ms-2 fw-bold"},"Filter by:"),n.a.createElement("label",{htmlFor:"name-filter",className:"form-label mx-3 d-inline-flex align-items-center text-nowrap"},"Planet name:",n.a.createElement("input",{className:"form-control form-control-sm ms-2",name:"name-filter",id:"name-filter","data-testid":"name-filter",onChange:function(e){var t=e.target.value;return l(Object(i.a)(Object(i.a)({},a),{},{filterByName:{name:t}}))}})),n.a.createElement("label",{htmlFor:"resident-filter",className:"form-label mx-2 d-inline-flex align-items-center text-nowrap"},"Resident name:",n.a.createElement("input",{className:"form-control form-control-sm ms-2",name:"resident-filter",id:"resident-filter",onChange:function(e){var t=e.target.value;return l(Object(i.a)(Object(i.a)({},a),{},{filterByResidentName:{resident:t}}))}})),n.a.createElement("div",{className:"d-flex align-items-center mt-2"},n.a.createElement("label",{htmlFor:"column",className:"form-label mx-2 my-0 d-flex align-items-center"},n.a.createElement("span",null,"Column:"),n.a.createElement("select",{className:"form-select form-select-sm ms-2",name:"column",id:"column","data-testid":"column-filter"},m.map((function(e){return n.a.createElement("option",{key:e},e)})))),n.a.createElement("label",{htmlFor:"comparison",className:"form-label mx-2 my-0 d-flex align-items-center"},"Comparison:",n.a.createElement("select",{className:"form-select form-select-sm ms-2",name:"comparison",id:"comparison","data-testid":"comparison-filter"},["bigger than","less than","equal to"].map((function(e){return n.a.createElement("option",{key:e},e)})))),n.a.createElement("label",{htmlFor:"value",className:"form-label mx-2 my-0 d-flex w-25 align-items-center"},"Value:",n.a.createElement("input",{className:"form-control form-control-sm ms-2",type:"number",name:"value",id:"value","data-testid":"value-filter"})),n.a.createElement("button",{className:"btn btn-sm btn-light mx-2",type:"button","data-testid":"button-filter",onClick:function(){return function(){var e=a.filterByNumericValues,t=document.getElementById("column").value,r=document.getElementById("comparison").value,n=document.getElementById("value").value,c=e.concat({column:t,comparison:r,value:n});l(Object(i.a)(Object(i.a)({},a),{},{filterByNumericValues:c}))}()},disabled:0===m.length},"Filter")),n.a.createElement("label",{htmlFor:"column-sort",className:"form-label mt-3 mx-2 d-flex align-items-center text-nowrap"},n.a.createElement("span",{className:"fw-bold"},"Order by:"),n.a.createElement("select",{className:"form-select form-select-sm mx-2 w-25",name:"column-sort",id:"column-sort","data-testid":"column-sort"},n.a.createElement("option",null,"Name"),n.a.createElement("option",null,"Rotation Period"),n.a.createElement("option",null,"Orbital Period"),n.a.createElement("option",null,"Diameter"),n.a.createElement("option",null,"Surface Water"),n.a.createElement("option",null,"Population")),n.a.createElement("label",{htmlFor:"ASC",className:"form-label d-flex my-0"},"ASC",n.a.createElement("input",{className:"form-check-input mx-2",type:"radio",id:"ASC",name:"column-sort",value:"ASC","data-testid":"column-sort-input-asc"})),n.a.createElement("label",{htmlFor:"DESC",className:"form-label d-flex my-0"},"DESC",n.a.createElement("input",{className:"form-check-input mx-2",type:"radio",id:"DESC",name:"column-sort",value:"DESC","data-testid":"column-sort-input-desc"})),n.a.createElement("button",{className:"btn btn-sm btn-light mx-2",type:"button","data-testid":"column-sort-button"},"Sort"))),n.a.createElement("div",{className:"filter-box bg-light border rounded px-3 py-1 m-1 w-25"},n.a.createElement("p",{className:"text-center py-1 m-0 fw-bold"},"Used filters:"),a.filterByNumericValues.map((function(e,t){return n.a.createElement("div",{"data-testid":"filter",className:"d-flex ms-3",id:t,key:t},n.a.createElement("span",{className:"me-auto align-self-center"},"".concat(e.column," ").concat(e.comparison," ").concat(e.value)),n.a.createElement("button",{type:"button",className:"btn btn-sm btn-warning mb-1 mx-2",onClick:function(){return function(e){var t=a.filterByNumericValues.filter((function(t){return t.column!==e.column}));l(Object(i.a)(Object(i.a)({},a),{},{filterByNumericValues:t}))}(e)}},n.a.createElement("i",{className:"bi bi-x-lg"})))}))))},u=a(1),p=a.n(u),f=a(2),d=a(4),b=["https://swapi-trybe.herokuapp.com/api/planets/?page=1","https://swapi-trybe.herokuapp.com/api/planets/?page=2","https://swapi-trybe.herokuapp.com/api/planets/?page=3","https://swapi-trybe.herokuapp.com/api/planets/?page=4","https://swapi-trybe.herokuapp.com/api/planets/?page=5","https://swapi-trybe.herokuapp.com/api/planets/?page=6"];function h(){return E.apply(this,arguments)}function E(){return(E=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.map(function(){var e=Object(f.a)(p.a.mark((function e(t){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",Promise.all(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=function(){var e=Object(f.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return t=e.sent,a=t.flat(),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://swapi-trybe.herokuapp.com/api/films/");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,r=a.results,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=["https://swapi-trybe.herokuapp.com/api/people/?page=1","https://swapi-trybe.herokuapp.com/api/people/?page=2","https://swapi-trybe.herokuapp.com/api/people/?page=3","https://swapi-trybe.herokuapp.com/api/people/?page=4","https://swapi-trybe.herokuapp.com/api/people/?page=5","https://swapi-trybe.herokuapp.com/api/people/?page=6","https://swapi-trybe.herokuapp.com/api/people/?page=7","https://swapi-trybe.herokuapp.com/api/people/?page=8","https://swapi-trybe.herokuapp.com/api/people/?page=9"];function g(){return N.apply(this,arguments)}function N(){return(N=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.map(function(){var e=Object(f.a)(p.a.mark((function e(t){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",Promise.all(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(){var e=Object(f.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:return t=e.sent,(a=t.flat()).splice(17,0,""),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var j=function(e){var t=e.children,a=Object(r.useState)(!1),l=Object(d.a)(a,2),c=l[0],o=l[1],i=Object(r.useState)([]),m=Object(d.a)(i,2),u=m[0],b=m[1],h=Object(r.useState)([]),E=Object(d.a)(h,2),x=E[0],g=E[1],N=Object(r.useState)([]),j=Object(d.a)(N,2),k=j[0],O=j[1],B=Object(r.useState)({filterByName:{name:""},filterByResidentName:{resident:""},filterByNumericValues:[],order:{column:"Name",sort:"ASC"}}),C=Object(d.a)(B,2),S=C[0],F=C[1],V=Object(r.useState)([]),D=Object(d.a)(V,2),_=D[0],I=D[1];function P(){return(P=Object(f.a)(p.a.mark((function e(){var t,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,y();case 3:return t=e.sent,b(t),e.next=7,v();case 7:return a=e.sent,g(a),e.next=11,w();case 11:r=e.sent,O(r),I(t),o(!1);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)((function(){!function(){P.apply(this,arguments)}()}),[]);var R={isLoading:c,planetData:u,filmData:x,charData:k,filters:S,setFilters:F,filterByNumericValue:_,setFilterByNumericValue:I};return n.a.createElement(s.Provider,{value:R},t)},k=a(7),O=a.n(k),B=a(8),C=a.n(B);var S=function(){return n.a.createElement(j,null,n.a.createElement("main",null,n.a.createElement("img",{src:C.a,alt:"Logo Star Wars",className:"logo"}),n.a.createElement("img",{src:O.a,alt:"Jedi",className:"starwars"}),n.a.createElement(m,null),n.a.createElement(o,null)))};c.a.render(n.a.createElement(S,null),document.getElementById("root"))},7:function(e,t,a){e.exports=a.p+"static/media/Star_Wars_silhouette_Olly_Moss_artwork.3b06afbb.jpg"},8:function(e,t,a){e.exports=a.p+"static/media/star-wars-logo.2db77352.svg"},9:function(e,t,a){e.exports=a(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.78e8a42d.chunk.js.map